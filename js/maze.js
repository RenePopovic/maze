var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var celica = new Image();
var xos = [0, 244, 0, 114, 130, 242, 66, 114, 162, 178, 194, 210,
    210, 210, 0, 18, 34, 50, 82, 98, 130, 162,
    178, 210, 18, 50, 66, 82, 98, 146, 146, 162,
    194, 226, 98, 146, 146, 194, 226, 242, 18, 66,
    98, 162, 210, 226, 2, 50, 66, 114, 130, 178,
    194, 210, 34, 66, 114, 130, 178, 194, 226, 242,
    18, 50, 114, 162, 194, 226, 0, 34, 50, 66,
    98, 114, 162, 210, 226, 242, 34, 50, 66, 82,
    130, 146, 178, 226, 50, 66, 82, 98, 114, 130,
    162, 210, 2, 34, 66, 114, 130, 146, 178, 226,
    18, 82, 114, 130, 162, 178, 18, 66, 114, 130,
    162, 178, 210, 242, 0, 114, 130, 242, 0, 0,
    18, 18, 18, 18, 18, 18, 18, 18, 34, 34,
    34, 34, 34, 34, 50, 50, 50, 50, 50, 50,
    50, 50, 66, 66, 66, 66, 66, 66, 66, 66,
    66, 66, 82, 82, 82, 82, 82, 82, 98, 98,
    98, 98, 98, 98, 114, 114, 114, 114, 114, 114,
    114, 114, 114, 114, 130, 130, 130, 130, 130, 130,
    130, 130, 130, 130, 146, 146, 146, 146, 146, 146,
    162, 162, 162, 162, 162, 162, 178, 178, 178, 178,
    178, 178, 194, 194, 194, 194, 210, 210, 210, 210,
    210, 210, 226, 226, 226, 226, 226, 226, 242, 242
];
var yos = [0, 0 ,0, 0, 0, 0, 18, 18, 18, 18, 18, 18,
    18, 0, 34, 34, 34, 34, 34, 34, 34, 34,
    34, 34, 50, 50, 50, 50, 50, 50, 50, 50,
    50, 50, 66, 66, 66, 66, 66, 66, 82, 82,
    82, 82, 82, 82, 98, 98, 98, 98, 98, 98,
    98, 98, 114, 114, 114, 114, 114, 114, 114, 114,
    130, 130, 130, 130, 130, 130, 146, 146, 146, 146,
    146, 146, 146, 146, 146, 146, 162, 162, 162, 162,
    162, 162, 162, 162, 178, 178, 178, 178, 178, 178,
    178, 178, 194, 194, 194, 194, 194, 194, 194, 194,
    210, 210, 210, 210, 210, 210, 226, 226, 226, 226,
    226, 226, 226, 226, 242, 242, 242, 242, 0, 242,
    18, 34, 50, 82, 98, 130, 162, 194, 18, 34,
    50, 66, 162, 178, 0, 34, 66, 82, 130, 146,
    162, 210, 34, 50, 66, 114, 130, 162, 178, 194,
    226, 242, 50, 82, 114, 162, 210, 226, 34, 50,
    98, 178, 194, 242, 0, 50, 82, 98, 114, 130,
    146, 194, 210, 226, 18, 34, 98, 114, 130, 162,
    194, 210, 226, 242, 0, 18, 114, 130, 146, 226,
    18, 50, 98, 114, 130, 210, 34, 98, 114, 146,
    210, 226, 66, 98, 194, 242, 50, 82, 98, 130,
    210, 226, 18, 50, 82, 98, 162, 210, 0, 242
];
celica.src = "img/celica.png";
ctx.scale(2, 2);

function labirint() {
    ctx.beginPath();

    ctx.lineCap = "square";
    ctx.lineWidth = 2;

    var i = 1
    while (i < 222) {
        ctx.lineTo(xos[i], yos[i]);
        i++;
        ctx.moveTo(xos[i], yos[i]);
        i++;
    }

    ctx.closePath();

    ctx.strokeStyle = 'black';
    ctx.stroke();
}

var y = 0;
var x = 120;
var nar = 1;
var dx = 2;
var dy = 2;

function drawIt() {
    ctx.fillStyle = "#560807";
    if (nar == 1) {

        ctx.fillRect(x, y, 2, 2);

        labirint();

    } else if (nar == 2) {
        ctx.clearRect(x - 8, y - 8, 18, 18);
        ctx.drawImage(celica, x - 4, y - 4, 11, 11);
        labirint();
    }
    if (x == 120 && y >= 0 && y <= 8)
        y += dy;
    if (y == 8 && x >= 120 && x <= 136)
        x += dx;
    if (x == 136 && y >= 8 && y <= 24)
        y += dy;
    if (y == 24 && x >= 136 && x <= 152)
        x += dx;
    if (x == 152 && y <= 24 && y >= 8)
        y -= dy;
    if (y == 8 && x >= 152 && x <= 188)
        x += dx;
    if (x == 188 && y >= 8 && y <= 55)
        y += dy;
    if (y == 24 && x <= 216 && x >= 168)
        x -= dx;
    if (x == 168 && y >= 24 && y <= 56)
        y += dy;
    if (y == 56 && x <= 168 && x >= 90)
        x -= dx;
    if (x == 90 && y >= 56 && y <= 72)
        y += dy;
    if (y == 72 && x >= 90 && x <= 168)
        x += dx;
    if (x == 168 && y >= 72 && y <= 88)
        y += dy;
    if (y == 88 && x <= 168 && x >= 120)
        x -= dx;
    if (x == 120 && y >= 88 && y <= 104)
        y += dy;
    if (y == 104 && x <= 120 && x >= 104)
        x -= dx;
    if (x == 104 && y >= 104 && y <= 136)
        y += dy;
    if (y == 136 && x >= 104 && x <= 120)
        x += dx;
    if (x == 120 && y >= 136 && y <= 168)
        y += dy;
    if (y == 168 && x >= 120 && x <= 136)
        x += dx;
    if (x == 136 && y >= 168 && y <= 184)
        y += dy;
    if (y == 184 && x <= 136 && x >= 120)
        x -= dx;
    if (x == 120 && y >= 184 && y <= 200)
        y += dy;
    if (y == 200 && x <= 120 && x >= 104)
        x -= dx;
    if (x == 104 && y >= 200 && y <= 232)
        y += dy;
    if (y == 232 && x >= 104 && x <= 120)
        x += dx;
    if (x == 120 && y >= 232 && y <= 238)
        y += dy;
    if (x == 120 && y == 238) {
        x = 120;
        y = 0;
        if (nar == 1) {
            nar++;
        } else {
            ctx.clearRect(x, y, 4, 4);
            nar++;
        }
    }
}
setInterval(drawIt, 15);